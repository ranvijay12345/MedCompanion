<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="consultation.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <title>Consultation</title>
</head>
<body>
    <nav id="navbar">
        <div id="logo">
            <img src="images/logo.jpg" alt="MedCompanion">
        </div>
        <ul>
            <li class="item"><a href="/">Home</a></li>
            <li class="item"><a href="/consultation">Consultation</a></li>
            <li class="item"><a href="/lab_test">Lab tests</a></li>
            <li class="item"><a href="/medicine">Medicines</a></li>
            <li class="item"><a href="/contact">Contact us</a></li>
        </ul>
        <% if (!session) {%>
            <div id="enroll" class="btn">
                <button id="login">login</button>
                <div id="signup">
                    <p>Don't have an account?</p>
                    <p id="signuplink">sign up</p>
                </div>
            </div>
            <% } else {%>
                <div class="btn" id="logged-in">
                    <button id="profile" onclick="location.href='/profile';"></button>
                </div>
                <% } %>
    </nav>
    <div class="popup-loginform" id="login-form">
        <form action="/login" class="login-box" method="post">
            <div class="login-head">
                <h1>Login</h1>
            </div>
            <label for="email"><b>Email</b></label>
            <input type="email" placeholder="Enter Email" name="email" id="login-email" required>
            <label for="psw"><b>Password</b></label>
            <input type="password" placeholder="Enter Password" name="psw" id="login-psw" required>
            <button type="submit" class="btn" id="login_btn">Login</button>
            <button type="button" class="btn cancel" id="close_btn_login">Close</button>
        </form>
    </div>
    <div class="popup-signupform" id="signup-form">
        <form action="/signup" class="signup-box" method="post" id="signup-user">
            <div class="signup-head">
                <h1>Sign up</h1>
            </div>
            <div>
                <label for="name"><b>Name</b></label>
                <input type="text" placeholder="Enter Name" name="name" required>
            </div>
            <div>
                <label for="cntc"><b>Contact No.</b></label>
                <input type="tel" placeholder="Enter Contact No." name="cntc" required>
            </div>
            <div>
                <label for="address"><b>Address</b></label>
                <input type="text" placeholder="Enter Address" name="address" required>
            </div>
            <div class="select">
                <label for="gender"><b>Gender</b></label>
                <select name="gender">
                    <option value="none">select gender</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Other">Other</option>
                </select>
                <label for="blood"><b>Blood group</b></label>
                <select name="blood">
                    <option value="none">select blood group</option>
                    <option value="A-">A-</option>
                    <option value="A+">A+</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                </select>
                <label for="dob" id="dob"><b>Date of Birth</b></label>
                <input type="date" name="dob" required>
            </div>
            <div>
                <label for="email_add"><b>Email</b></label>
                <input type="email" placeholder="Enter Email" name="email_add" required>
            </div>
            <div>
                <label for="password"><b>Password</b></label>
                <input type="password" placeholder="Enter Password" name="password" id="password"
                    pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                    title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
                    required>
            </div>
            <div>
                <label for="repeat-password"><b>Repeat Password</b></label>
                <input type="password" placeholder="Repeat Password" name="repeat-password" id="repeat-password"
                    required>
            </div>
            <div>
                <button type="submit" class="btn" id="signup_btn">Sign up</button>
                <button type="button" class="btn cancel" id="close_btn_signup">Close</button>
            </div>
        </form>
    </div>
    <div class="chatbot">
        <button class="chat-icon" onclick="location.href='/chatbot';" id="chatbot_btn"></button>
    </div>
    <section class="steps">
        <h1>How Online Doctor Consultation Works?</h1>
        <div class="steps-container">
            <div class="left-box box" id="box1">
                <img src="images/doctors/step1.webp" alt="error" id="s1">
                <h3>01</h3>
                <div id="description">
                    <p id="heading">Choose your doctor</p>
                    <p>Choose a Specialist from our Expert doctors to discuss your Health issues.</p>
                </div>
            </div>
            <div class="right-box box" id="box2">
                <h3>02</h3>
                <div id="description"> 
                    <p id="heading">Book an appointment</p>
                    <p>Book an appointment with the specialist at a time of your comfort. You shall recieve the comformation and Meeting details shortly.</p>
                </div>
                <img src="images/doctors/step2.jpg" alt="error" id="s2">
            </div>
            <div class="left-box box" id="box3">
                <img src="images/doctors/step3.webp" alt="error" id="s3">
                <h3>03</h3>
                <div id="description">
                    <p id="heading">Connect with the doctor</p>
                    <p>Video Conference with your doctor at the stipulated time to get medical attention.</p>
                </div>
            </div>
            <div class="right-box box" id="box4">
                <h3>04</h3>
                <div id="description">
                    <p id="heading">Offline visit</p>
                    <p>After online consultation if you still need physical attention then you can discuss with the doctor and arrange a physical visit.</p>
                </div>
                <img src="images/doctors/step4.jpg" alt="error" id="s4">
            </div>
        </div>
    </section>
    <section class="doctor-section">
        <h1>Our Doctors</h1>
        <div class="doctors">
            <div class="doctor-container">
                <div class="department">
                    <img src="images/doctors/cardiology.jpg" alt="error" class="doc-type">
                    <h2><%= docs[0].Field%></h2>
                </div>
                <div class="about">
                    <h3><%= docs[0].Name%></h3>
                    <p><%= docs[0].Qualification%><br>Exp: <%= docs[0].Experience%></p>
                </div>
                <form action="/book_doctor" method="post">
                    <input type="hidden" name="doctorId" value="D0001">
                    <button class="book-consult" id="book-consult1">Book appointment now</button>
                </form>
            </div>
            <div class="doctor-container">
                <div class="department">
                    <img src="images/doctors/dermatology.jpg" alt="error" class="doc-type">
                    <h2><%= docs[1].Field%></h2>
                </div>
                <div class="about">
                    <h3><%= docs[1].Name%></h3>
                    <p><%= docs[1].Qualification%><br>Exp: <%= docs[1].Experience%></p>
                </div>
                <form action="/book_doctor" method="post">
                    <input type="hidden" name="doctorId" value="D0002">
                    <button class="book-consult" id="book-consult2">Book appointment now</button>
                </form>
            </div>
            <div class="doctor-container">
                <div class="department">
                    <img src="images/doctors/paediatrics.jpg" alt="error" class="doc-type">
                    <h2><%= docs[2].Field%></h2>
                </div>
                <div class="about">
                    <h3><%= docs[2].Name%></h3>
                    <p><%= docs[2].Qualification%><br>Exp: <%= docs[2].Experience%></p>
                </div>
                <form action="/book_doctor" method="post">
                    <input type="hidden" name="doctorId" value="D0003">
                    <button class="book-consult" id="book-consult3">Book appointment now</button>
                </form>
            </div>
            <div class="doctor-container">
                <div class="department">
                    <img src="images/doctors/pulmonology.jpg" alt="" class="doc-type">
                    <h2><%= docs[3].Field%></h2>
                </div>
                <div class="about">
                    <h3><%= docs[3].Name%></h3>
                    <p><%= docs[3].Qualification%><br>Exp: <%= docs[3].Experience%></p>
                </div>
                <form action="/book_doctor" method="post">
                    <input type="hidden" name="doctorId" value="D0004">
                    <button class="book-consult" id="book-consult4">Book appointment now</button>
                </form>
            </div>
            <div class="doctor-container">
                <div class="department">
                    <img src="images/doctors/gynac.webp" alt="" class="doc-type">
                    <h2><%= docs[4].Field%></h2>
                </div>
                <div class="about">
                    <h3><%= docs[4].Name%></h3>
                    <p><%= docs[4].Qualification%><br>Exp: <%= docs[4].Experience%></p>
                </div>
                <form action="/book_doctor" method="post">
                    <input type="hidden" name="doctorId" value="D0005">
                    <button class="book-consult" id="book-consult5">Book appointment now</button>
                </form>
            </div>
            <div class="doctor-container">
                <div class="department">
                    <img src="images/doctors/gastro.jpg" alt="" class="doc-type">
                    <h2><%= docs[5].Field%></h2>
                </div>
                <div class="about">
                    <h3><%= docs[5].Name%></h3>
                    <p><%= docs[5].Qualification%><br>Exp: <%= docs[5].Experience%></p>
                </div>
                <form action="/book_doctor" method="post">
                    <input type="hidden" name="doctorId" value="D0006">
                    <button class="book-consult" id="book-consult6">Book appointment now</button>
                </form>
            </div>
            <div class="doctor-container">
                <div class="department">
                    <img src="images/doctors/neuro.jpg" alt="" class="doc-type">
                    <h2><%= docs[6].Field%></h2>
                </div>
                <div class="about">
                    <h3><%= docs[6].Name%></h3>
                    <p><%= docs[6].Qualification%><br>Exp: <%= docs[6].Experience%></p>
                </div>
                <form action="/book_doctor" method="post">
                    <input type="hidden" name="doctorId" value="D0007">
                    <button class="book-consult" id="book-consult7">Book appointment now</button>
                </form>
            </div>
            <div class="doctor-container">
                <div class="department">
                    <img src="images/doctors/diabetology.jpg" alt="" class="doc-type">
                    <h2><%= docs[7].Field%></h2>
                </div>
                <div class="about">
                    <h3><%= docs[7].Name%></h3>
                    <p><%= docs[7].Qualification%><br>Exp: <%= docs[7].Experience%></p>
                </div>
                <form action="/book_doctor" method="post">
                    <input type="hidden" name="doctorId" value="D0008">
                    <button class="book-consult" id="book-consult8">Book appointment now</button>
                </form>
            </div>
            <div class="doctor-container">
                <div class="department">
                    <img src="images/doctors/urology.jpg" alt="" class="doc-type">
                    <h2><%= docs[8].Field%></h2>
                </div>
                <div class="about">
                    <h3><%= docs[8].Name%></h3>
                    <p><%= docs[8].Qualification%><br>Exp: <%= docs[8].Experience%></p>
                </div>
                <form action="/book_doctor" method="post">
                    <input type="hidden" name="doctorId" value="D0009">
                    <button class="book-consult" id="book-consult9">Book appointment now</button>
                </form>
            </div>
            <div class="doctor-container">
                <div class="department">
                    <img src="images/doctors/endocrinology.jpg" alt="" class="doc-type">
                    <h2><%= docs[9].Field%></h2>
                </div>
                <div class="about">
                    <h3><%= docs[9].Name%></h3>
                    <p><%= docs[9].Qualification%><br>Exp: <%= docs[9].Experience%></p>
                </div>
                <form action="/book_doctor" method="post">
                    <input type="hidden" name="doctorId" value="D00010">
                    <button class="book-consult" id="book-consult10">Book appointment now</button>
                </form>
            </div>
            <div class="doctor-container physician">
                <div class="department">
                    <img src="images/doctors/physician.jpg" alt="" class="doc-type">
                    <h2><%= docs[10].Field%></h2>
                </div>
                <div class="about">
                    <h3><%= docs[10].Name%></h3>
                    <p><%= docs[10].Qualification%><br>Exp: <%= docs[10].Experience%></p>
                </div>
                <form action="/book_doctor" method="post">
                    <input type="hidden" name="doctorId" value="D00011">
                    <button class="book-consult" id="book-consult11">Book appointment now</button>
                </form>
            </div>
        </div>
        <% if (usr) { %>
            <% var usrId = usr.Id %>
            <% } else { %>
                <% var usrId = null %>
                <% } %>
        <% if (docId) { %>
            <div class="popup-cnfm book_time" id="book_time">
                <div class="book_time_head">
                    <h3>Appointment Time</h3>
                </div>
                <div class="book_time_form_box">
                    <p>Please inform us your preferred date and time for consultation.</p>
                    <form action="/consult_booking" method="post" class="book_time_form">
                        <label for="date">Date</label>
                        <input type="date" name="date" id="date" required>
                        <label for="time">Time</label>
                        <input type="time" name="time" id="time" min="10:00" max="21:00" required>
                        <input type="hidden" name="usrId" value="<%= usrId %>">
                        <input type="hidden" name="doctorId" value="<%= docId %>">
                        <button type="submit" class="btn" id="booking_btn">Submit</button>
                        <button type="button" class="btn cancel" id="close_booking">Close</button>
                    </form>
                </div>
            </div>
            <% } %>
        <% if(booking == 'error') { %>
            <div class="popup-cnfm" id="booking-login-err">
                <div class="cnfm-icon">
                    <i class="material-icons booking-err">&#xe000;</i>
                </div>
                <h3 class="cnfm-head">Oops!</h3>
                <div class="cnfm-para">
                    <p>Please log in first to book an appointment.</p>
                </div>
                <div class="cnfm-btn">
                    <button id="booking-err-ok" onclick=booking_err_close()>OK</button>
                </div>
            </div>
            <% } else if (booking == 'success') { %>
                <div class="popup-cnfm" id="booking-cnfm">
                    <div class="cnfm-icon">
                        <i class="material-icons">&#xE876;</i>
                    </div>
                    <h3 class="cnfm-head">Awesome!</h3>
                    <div class="cnfm-para">
                        <p>Your booking has been confirmed.</p>
                        <p>Check your mail for detailes.</p>
                    </div>
                    <div class="cnfm-btn">
                        <button id="booking-cnfm-ok" onclick=booking_cnfm_close()>OK</button>
                    </div>
                </div>
                <% } %>
    </section>
    <script type="text/javascript" src="app.js"></script>
    <script type="text/javascript" src="chat_frontend.js"></script>
    <script type="text/javascript" src="book_frontend.js"></script>
</body>
</html>
