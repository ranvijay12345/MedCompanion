<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="lab_test.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script src="app.js"></script>
    <title>Lab Test</title>
</head>

<body>
    <nav id="navbar">
        <div id="logo">
            <img src="images/logo.jpg" alt="MedCompanion">
        </div>
        <ul>
            <li class="item"><a href="/">Home</a></li>
            <li class="item"><a href="/consultation">Consultation</a></li>
            <li class="item"><a href="/lab_test">Lab tests</a></li>
            <li class="item"><a href="/medicine">Medicines</a></li>
            <li class="item"><a href="/contact">Contact us</a></li>
        </ul>
        <% if (!session) {%>
            <div id="enroll" class="btn">
                <button id="login">login</button>
                <div id="signup">
                    <p>Don't have an account?</p>
                    <p id="signuplink">sign up</p>
                </div>
            </div>
            <% } else {%>
                <div class="btn" id="logged-in">
                    <button id="profile" onclick="location.href='/profile';"></button>
                </div>
                <% } %>
    </nav>
    <div class="popup-loginform" id="login-form">
        <form action="/login" class="login-box" method="post">
            <div class="login-head">
                <h1>Login</h1>
            </div>
            <label for="email"><b>Email</b></label>
            <input type="email" placeholder="Enter Email" name="email" id="login-email" required>
            <label for="psw"><b>Password</b></label>
            <input type="password" placeholder="Enter Password" name="psw" id="login-psw" required>
            <button type="submit" class="btn" id="login_btn">Login</button>
            <button type="button" class="btn cancel" id="close_btn_login">Close</button>
        </form>
    </div>
    <div class="popup-signupform" id="signup-form">
        <form action="/signup" class="signup-box" method="post" id="signup-user">
            <div class="signup-head">
                <h1>Sign up</h1>
            </div>
            <div>
                <label for="name"><b>Name</b></label>
                <input type="text" placeholder="Enter Name" name="name" required>
            </div>
            <div>
                <label for="cntc"><b>Contact No.</b></label>
                <input type="tel" placeholder="Enter Contact No." name="cntc" required>
            </div>
            <div>
                <label for="address"><b>Address</b></label>
                <input type="text" placeholder="Enter Address" name="address" required>
            </div>
            <div class="select">
                <label for="gender"><b>Gender</b></label>
                <select name="gender">
                    <option value="none">select gender</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Other">Other</option>
                </select>
                <label for="blood"><b>Blood group</b></label>
                <select name="blood">
                    <option value="none">select blood group</option>
                    <option value="A-">A-</option>
                    <option value="A+">A+</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                </select>
                <label for="dob" id="dob"><b>Date of Birth</b></label>
                <input type="date" name="dob" required>
            </div>
            <div>
                <label for="email_add"><b>Email</b></label>
                <input type="email" placeholder="Enter Email" name="email_add" required>
            </div>
            <div>
                <label for="password"><b>Password</b></label>
                <input type="password" placeholder="Enter Password" name="password" id="password"
                    pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                    title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
                    required>
            </div>
            <div>
                <label for="repeat-password"><b>Repeat Password</b></label>
                <input type="password" placeholder="Repeat Password" name="repeat-password" id="repeat-password"
                    required>
            </div>
            <div>
                <button type="submit" class="btn" id="signup_btn">Sign up</button>
                <button type="button" class="btn cancel" id="close_btn_signup">Close</button>
            </div>
        </form>
    </div>
    <div class="chatbot">
        <button class="chat-icon" onclick="location.href='/chatbot';"></button>
    </div>
    <% if (disease==0) { %>
        <div class="popup-cnfm" id="predict-result1">
            <div class="cnfm-icon">
                <i class="material-icons" id="predict0">&#xe000;</i>
            </div>
            <h3 class="cnfm-head">Oops!</h3>
            <div class="cnfm-para">
                <p>You may have some heart problem. Please consult to our cardiologist.</p>
            </div>
            <div class="cnfm-btn">
                <button id="predict-ok0" class="predict-ok" onclick=cnfm_predict_close1()>OK</button>
            </div>
        </div>
        <% } else if (disease==1) { %>
            <div class="popup-cnfm" id="predict-result0">
                <div class="cnfm-icon">
                    <i class="material-icons">&#xE876;</i>
                </div>
                <h3 class="cnfm-head">Awesome!</h3>
                <div class="cnfm-para">
                    <p>You are not having any heart related issues.</p>
                </div>
                <div class="cnfm-btn">
                    <button id="predict-ok1" class="predict-ok" onclick=cnfm_predict_close0()>OK</button>
                </div>
            </div>
            <% } %>
    <section class="steps">
        <h1>How Online Lab Test Works?</h1>
        <div class="steps-container">
            <div class="left-box box" id="box1">
                <img src="images/labtest/step1.jpeg" alt="error" id="s1">
                <h3>01</h3>
                <div id="description">
                    <p id="heading">Choose your tests</p>
                    <p>Choose a test or set of tests from the wide variety of Medical Test available to you.</p>
                </div>
            </div>
            <div class="right-box box" id="box2">
                <h3>02</h3>
                <div id="description">
                    <p id="heading">Book tests</p>
                    <p>Book your home test sample collection time as per your convience.</p>
                </div>
                <img src="images/labtest/step2.jpg" alt="error" id="s2">
            </div>
            <div class="left-box box" id="box3">
                <img src="images/labtest/step3.jpg" alt="error" id="s3">
                <h3>03</h3>
                <div id="description">
                    <p id="heading">Give your test sample</p>
                    <p>Our Health Care provider will reach your home as per scheduled time to collect test sample.</p>
                </div>
            </div>
            <div class="right-box box" id="box4">
                <h3>04</h3>
                <div id="description">
                    <p id="heading">Online test results</p>
                    <p>You will recieveyour test reports online once tests have been completed as quickly as possible.
                    </p>
                </div>
                <img src="images/labtest/step4.jpg" alt="error" id="s4">
            </div>
        </div>
    </section>
    <section class="test-section">
        <h1>Lab tests</h1>
        <form action="/book_test" method="post">
            <div class="test-container">
                <img src="images/labtest/cbc.jpg" alt="error">
                <div class="name">
                    <h3>Complete Blood Count Test(CBC)</h3>
                </div>
                <input type="radio" name="t1" id="r1" value="T0001">
            </div>
            <div class="test-container">
                <img src="images/labtest/rtpcr.jpg" alt="error">
                <div class="name">
                    <h3>RT-PCR Test</h3>
                </div>
                <input type="radio" name="t2" id="r2" value="T0002">
            </div>
            <div class="test-container">
                <img src="images/labtest/thyroid.webp" alt="error">
                <div class="name">
                    <h3>Thyroid profile Test</h3>
                </div>
                <input type="radio" name="t3" id="r3" value="T0003">
            </div>
            <div class="test-container">
                <img src="images/labtest/kidney.jpg" alt="error">
                <div class="name">
                    <h3>Kidney Function Test</h3>
                </div>
                <input type="radio" name="t4" id="r4" value="T0004">
            </div>
            <div class="test-container">
                <img src="images/labtest/iron.jpg" alt="error">
                <div class="name">
                    <h3>Iron Deficiency Profile</h3>
                </div>
                <input type="radio" name="t5" id="r5" value="T0005">
            </div>
            <div class="test-container">
                <img src="images/labtest/lipid.jpg" alt="error">
                <div class="name">
                    <h3>Lipid Profile</h3>
                </div>
                <input type="radio" name="t6" id="r6" value="T0006">
            </div>
            <div class="test-container">
                <img src="images/labtest/hepatitis.jpg" alt="error">
                <div class="name">
                    <h3>Hepatitis Bs(Surface) Antigen</h3>
                </div>
                <input type="radio" name="t7" id="r7" value="T0007">
            </div>
            <div class="test-container">
                <img src="images/labtest/liver.jpg" alt="error">
                <div class="name">
                    <h3>Liver Function Test</h3>
                </div>
                <input type="radio" name="t8" id="r8" value="T0008">
            </div>
            <div class="test-container">
                <img src="images/labtest/glycosilated.jpg" alt="error">
                <div class="name">
                    <h3>Glycosylated Hemoglobin</h3>
                </div>
                <input type="radio" name="t9" id="r9" value="T0009">
            </div>
            <div class="test-container">
                <img src="images/labtest/blood-glucose.jpg" alt="error">
                <div class="name">
                    <h3>Blood Glucose Test</h3>
                </div>
                <input type="radio" name="t10" id="r10" value="T00010">
            </div>
            <div class="test-container">
                <img src="images/labtest/urine-routin.jpg" alt="error">
                <div class="name">
                    <h3>Urine Routine & Microscopy</h3>
                </div>
                <input type="radio" name="t11" id="r11" value="T00011">
            </div>
            <div class="test-container">
                <img src="images/labtest/blood-group.jpg" alt="error">
                <div class="name">
                    <h3>Blood Grouping</h3>
                </div>
                <input type="radio" name="t12" id="r12"  value="T00012">
            </div>
            <div class="test-container">
                <img src="images/labtest/rapid-plasma.jpg" alt="error">
                <div class="name">
                    <h3>Rapid Plasma Reagin</h3>
                </div>
                <input type="radio" name="t13" id="r13"  value="T00013">
            </div>
            <div class="test-container">
                <img src="images/labtest/hiv.jpg" alt="error">
                <div class="name">
                    <h3>HIV 1 And 2 Antibody</h3>
                </div>
                <input type="radio" name="t14" id="r14" value="T00014">
            </div>
            <div class="test-container">
                <img src="images/labtest/rheumatoid.jpg" alt="error">
                <div class="name">
                    <h3>Rheumatoid Factor - Quantitative</h3>
                </div>
                <input type="radio" name="t15" id="r15" value="T00015">
            </div>
            <div class="test-container">
                <img src="images/labtest/calsium.jpg" alt="error">
                <div class="name">
                    <h3>Calcium Test</h3>
                </div>
                <input type="radio" name="t16" id="r16"  value="T00016">
            </div>
            <div class="test-container">
                <img src="images/labtest/crp.jpg" alt="error">
                <div class="name">
                    <h3>C- Reactive Protein Quantitative</h3>
                </div>
                <input type="radio" name="t17" id="r17" value="T00017">
            </div>
            <div class="test-container">
                <img src="images/labtest/esr.jpg" alt="error">
                <div class="name">
                    <h3>Erythrocyte Sedimentation Rate</h3>
                </div>
                <input type="radio" name="t18" id="r18"  value="T00018">
            </div>
            <div class="booktest">
                <button class="testbtn" id="book_test">Book test now</button>
            </div>
        </form>
        <% if (usr) { %>
            <% var usrId = usr.Id %>
            <% } else { %>
                <% var usrId = null %>
                <% } %>
        <% if (testIds) { %>
            <div class="popup-cnfm book_time" id="book_time">
                <div class="book_time_head">
                    <h3>Appointment Time</h3>
                </div>
                <div class="book_time_form_box">
                    <p>Please inform us your preferred date and time for lab test.</p>
                    <form action="/test_booking" method="post" class="book_time_form">
                        <label for="date">Date</label>
                        <input type="date" name="date" id="date" required>
                        <label for="time">Time</label>
                        <input type="time" name="time" id="time" min="10:00" max="21:00" required>
                        <input type="hidden" name="usrId" value="<%= usrId %>">
                        <input type="hidden" name="testIds" value="<%= testIds %>">
                        <button type="submit" class="btn" id="booking_btn">Submit</button>
                        <button type="button" class="btn cancel" id="close_booking">Close</button>
                    </form>
                </div>
            </div>
            <% } %>
        <% if(booking == 'error') { %>
            <div class="popup-cnfm" id="booking-login-err">
                <div class="cnfm-icon">
                    <i class="material-icons booking-test-err">&#xe000;</i>
                </div>
                <h3 class="cnfm-head">Oops!</h3>
                <div class="cnfm-para">
                    <p>Please log in first to book a lab test.</p>
                </div>
                <div class="cnfm-btn">
                    <button id="booking-err-ok" onclick=booking_err_close()>OK</button>
                </div>
            </div>
            <% } else if (booking == 'success') { %>
                <div class="popup-cnfm" id="booking-cnfm">
                    <div class="cnfm-icon">
                        <i class="material-icons">&#xE876;</i>
                    </div>
                    <h3 class="cnfm-head">Awesome!</h3>
                    <div class="cnfm-para">
                        <p>Your booking has been confirmed.</p>
                        <p>Check your mail for detailes.</p>
                    </div>
                    <div class="cnfm-btn">
                        <button id="booking-cnfm-ok" onclick=booking_cnfm_close()>OK</button>
                    </div>
                </div>
                <% } %>
    </section>
    <section class="prediction">
        <h1>How Disease Prediction Works?</h1>
        <div class="steps-container">
            <div class="left-box box" id="box1">
                <img src="images/labtest/predict_step1.jpg" alt="error" id="s1">
                <h3>01</h3>
                <div id="description">
                    <p id="heading">Input data</p>
                    <p>In disease prediction form input your health data which you recieved from your lab test resports.
                    </p>
                </div>
            </div>
            <div class="right-box box" id="box2">
                <h3>02</h3>
                <div id="description">
                    <p id="heading">ML processing</p>
                    <p>Our machine learning model will process on your health data to predict your disease.</p>
                </div>
                <img src="images/labtest/predict_step2.jpeg" alt="error" id="s2">
            </div>
            <div class="left-box box" id="box3">
                <img src="images/labtest/predict_step3.webp" alt="error" id="s3">
                <h3>03</h3>
                <div id="description">
                    <p id="heading">Prediction result</p>
                    <p>After processing is over we'll display your disease to you. Please note that this prediction is
                        not 100% accurate and is only for so that you have a rough idea of your health condition. So
                        please
                        consult our doctor for surety.</p>
                </div>
            </div>
            <div class="booktest">
                <button class="testbtn" id="predict_form_btn" onclick="predict()">Predict your disease now</button>
            </div>
            <div class="popup-signupform" id="predict_form">
                <form action="/disease_prediction" method="post" class="predict_box">
                    <div class="predict_head">
                        <h1>Disease Prediction</h1>
                    </div>
                    <div>
                        <label for="sex">Gender</label>
                        <select name="sex" required>
                            <option value="none">select sex</option>
                            <option value="0">Male</option>
                            <option value="1">Female</option>
                        </select>
                        <label for="age">Age</label>
                        <input type="number" name="age" min="1" max="120" required>
                    </div>
                    <div>
                        <label for="restbps">Rest blood pressure</label>
                        <input type="number" name="restbps" min="50" max="300" required>
                        <label for="chol">Cholesterol</label>
                        <input type="number" name="chol" min="100" max="400" required>
                    </div>
                    <div>
                        <label for="thalach">Max heart-rate</label>
                        <input type="number" name="thalach" min="0" max="300" required>
                        <label for="oldpeak">Oldpeak(depression)</label>
                        <input type="number" name="oldpeak" step="0.1" min="0.0" max="10.0" required>
                    </div>
                    <div>
                        <label for="cp">Chest pain level</label>
                        <input type="number" name="cp" min="0" max="3" required>
                        <label for="fbs">Fasting blood sugar</label>
                        <select name="fbs" required>
                            <option value="none">select fbs</option>
                            <option value="1">yes</option>
                            <option value="0">no</option>
                        </select>
                    </div>
                    <div>
                        <label for="recg">rest ECG</label>
                        <select name="recg" id="recg" required>
                            <option value="none">select level</option>
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                        </select>
                        <label for="exang">Exang</label>
                        <select name="exang" required>
                            <option value="none">select exang</option>
                            <option value="1">yes</option>
                            <option value="0">no</option>
                        </select>
                    </div>
                    <div>
                        <label for="slope">ST/HR slope</label>
                        <select name="slope" required>
                            <option value="none">select level</option>
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                        </select>
                        <label for="ca">Coronary artery</label>
                        <input type="number" min="0" max="4" required>
                    </div>
                    <div>
                        <label for="thal">Thalassemia</label>
                        <input type="number" min="0" max="3" required>
                    </div>
                    <div class="predict_btns">
                        <button type="submit" class="btn" id="predict_btn">Predict</button>
                        <button type="button" class="btn cancel" id="close_predict_signup" onclick=predict_close()>Close</button>
                    </div>
                </form>
            </div>
        </div>
    </section>
    <script type="text/javascript" src="app.js"></script>
    <script type="text/javascript" src="chat_frontend.js"></script>
    <script type="text/javascript" src="book_frontend.js"></script>
</body>
</html>
